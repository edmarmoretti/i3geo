try{$i("i3geo")}catch(e){$i=function(i){return document.getElementById(i)}}$im=function(g){return i3GEO.configura.locaplic+"/imagens/visual/"+g_visual+"/"+g};$inputText=function(idPai,larguraIdPai,idInput,titulo,digitos,valor){if(idPai!=""){if(larguraIdPai!=""){$i(idPai).style.width=larguraIdPai+"px"}$i(idPai).style.padding="3";$i(idPai).style.textAlign="center";$i(idPai).onmouseover=function(){this.className="digitarMouseover"};$i(idPai).onmouseout=function(){this.className=""}}var i="<input onmouseover='javascript:this.className=\"digitarOver\";' onmouseout='javascript:this.className=\"digitar\";' onclick='javascript:this.className=\"digitarMouseclick\";' id="+idInput+" title='"+titulo+"' type=text size="+digitos+" class=digitar value='"+valor+"' />";return i};$top=function(id,valor){if(document.getElementById(id).style){if(document.getElementById(id).style.pixelTop){document.getElementById(id).style.pixelTop=valor}else{document.getElementById(id).style.top=valor+"px"}}};$left=function(id,valor){if(document.getElementById(id).style){if(document.getElementById(id).style.pixelLeft){document.getElementById(id).style.pixelLeft=valor}else{document.getElementById(id).style.left=valor+"px"}}};function trataErro(){i3GEO.janela.fechaAguarde("ajaxdestaca");i3GEO.janela.fechaAguarde("ajaxabrelente");i3GEO.janela.fechaAguarde("ajaxiniciaParametros");i3GEO.janela.fechaAguarde("ajaxredesenha");i3GEO.janela.fechaAguarde("ajaxCorpoMapaEntorno");i3GEO.janela.fechaAguarde("ajaxCorpoMapa");i3GEO.janela.fechaAguarde("ajaxLegenda");i3GEO.janela.fechaAguarde("ajaxReferencia");i3GEO.janela.fechaAguarde("ajaxEscalaGrafica");i3GEO.janela.fechaAguarde("montaMapa");i3GEO.janela.fechaAguarde("aguardedoc");i3GEO.janela.fechaAguarde("ajaxCorpoMapa1")}function criaContainerRichdraw(){try{if(!$i("divGeometriasTemp")){var pos=[0,0];if($i("img"))var pos=i3GEO.util.pegaPosicaoObjeto($i("img"));var novoel=document.createElement("div");novoel.id="divGeometriasTemp";var ne=novoel.style;ne.cursor="crosshair";ne.zIndex=0;ne.position="absolute";ne.width=objmapa.w;ne.height=objmapa.h;ne.border="1px solid black";ne.display="none";ne.top=pos[1];ne.left=pos[0];document.body.appendChild(novoel)}var divgeo=$i("divGeometriasTemp");divgeo.innerHTML="";var renderer;try{renderer=new VMLRenderer();richdraw=new RichDrawEditor(divgeo,renderer)}catch(e){renderer=new SVGRenderer();richdraw=new RichDrawEditor(divgeo,renderer)}richdraw.editCommand('fillcolor','red');richdraw.editCommand('linecolor','gray');richdraw.editCommand('linewidth','1px');richdraw.editCommand('mode','line');divgeo.style.display="block";ativaClicks(divgeo)}catch(e){alert("Erro ao tentar criar container richdraw")}}function mudaVisual(visual){var monta=function(retorno){try{i3GEO.janela.fechaAguarde("ajaxredesenha");var imgstemp=retorno.data.arquivos;var imgs=new Array();var i=imgstemp.length-1;if(i>=0){do{var temp=imgstemp[i].split(".");if((temp[1]=="png")||(temp[1]=="gif")||(temp[1]=="jpg")){imgs.push(imgstemp[i])}}while(i--)}var elementos=document.getElementsByTagName("img");var elt=elementos.length;var caminho=i3GEO.configura.locaplic+"/imagens/visual/"+visual+"/";var j=imgs.length-1;if(j>=0){do{for(var i=0;i<elt;i++){if((elementos[i].src.search("branco")>-1)&&((elementos[i].className!="")||(elementos[i].id!=""))){elementos[i].src=caminho+"branco.gif"}if(elementos[i].src.search("visual")>-1){elementos[i].style.backgroundImage="url('"+caminho+imgs[j]+"')"}}}while(j--)}var j=imgs.length-1;if(j>=0){do{var busca=imgs[j].split(".");if($i(busca[0])){$i(busca[0]).src=caminho+imgs[j]}}while(j--)}var elementos=new Array("vertMaisZoom","vertMenosZoom","foldermapa","foldermapa1","tic");var i=elementos.length-1;if(i>=0){do{if($i(elementos[i])){$i(elementos[i]).style.backgroundImage="url('"+caminho+"sprite.png')";for(var j=0;j<imgs.length;j++){var busca=imgs[j].split(".");if(busca[0]==elementos[i]){$i(elementos[i]).style.backgroundImage="url('"+caminho+imgs[j]+"')"}}}}while(i--)}g_visual=visual}catch(e){alert("Ocorreu um erro. mudaVisual"+e);i3GEO.janela.fechaAguarde("ajaxredesenha")}};i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=listaArquivos&g_sid="+i3GEO.configura.sid+"&diretorio=imagens/visual/"+visual;cpObj.call(p,"mudaQS",monta)}function docaguias(){if(!$i("conteudojanelaguias")){if($i("guiasYUI")){$i("guiasYUI").style.display="none"}if(!$i("contemFerramentas")){return}var novono=$i("contemFerramentas").innerHTML;$i("contemFerramentas").innerHTML="";var wef=0;if($i("encolheFerramentas")){wef=parseInt($i("encolheFerramentas").style.width)}var w=parseInt($i("contemFerramentas").style.width)-wef;$i("contemFerramentas").style.width="0px";if($i("visual")){$i("visual").style.width="0px";$i("visual").innerHTML=""}var pos="px";var a=objmapa.h;var l=objmapa.w+w;objmapa.h=a;objmapa.w=l;if(navm){pos=""}$i("img").style.width=l+pos;$i("img").style.height=a+pos;$i("corpoMapa").style.width=l+pos;$i("corpoMapa").style.height=a+pos;$i("corpoMapa").style.clip='rect('+0+" "+(l*1+2)+" "+(a*1+2)+" "+0+')';$i("mst").style.width=l+1+wef+pos;$i("contemImg").style.height=a+pos;$i("contemImg").style.width=l+pos;if(g_entorno=="sim"){var letras=["L","O"];for(var l=0;l<2;l++){if($i("img"+letras[l])){$i("img"+letras[l]).style.width=objmapa.w+pos;$i("img"+letras[l]).style.height=objmapa.h+pos;$i("corpoMapa"+letras[l]).style.width=objmapa.w+pos;$i("corpoMapa"+letras[l]).style.height=objmapa.h+pos+pos;$i("corpoMapa"+letras[l]).style.clip='rect(0 0 0 0)'}}var letras=["N","S"];for(var l=0;l<2;l++){if($i("img"+letras[l])){$i("img"+letras[l]).style.width=objmapa.w*2+pos;$i("img"+letras[l]).style.height=objmapa.h*2+pos;$i("corpoMapa"+letras[l]).style.width=objmapa.w*3+pos;$i("corpoMapa"+letras[l]).style.height=objmapa.h+pos;$i("corpoMapa"+letras[l]).style.clip='rect(0 0 0 0)'}}}calcposf();var temp=function(){var novoel=document.createElement("div");novoel.id="janelaguias";novoel.style.display="block";var temp='<div class="hd">Guias</div>';temp+='<div class="bd" id="conteudojanelaguias"></div>';novoel.innerHTML=temp;if($i("i3geo")){$i("i3geo").appendChild(novoel)}else{document.body.appendChild(novoel)}$i("conteudojanelaguias").innerHTML=novono;YAHOO.namespace("janelaguias.xp");YAHOO.janelaguias.xp.panel=new YAHOO.widget.Panel("janelaguias",{width:"268px",fixedcenter:true,constraintoviewport:false,underlay:"none",close:true,visible:true,draggable:true,modal:false});YAHOO.janelaguias.xp.panel.render();if($i(objmapa.guiaMenu+"obj")){$i(objmapa.guiaMenu+"obj").innerHTML=""}if($i("listaTemas")){$i("listaTemas").innerHTML=""}if($i("listaPropriedades")){$i("listaPropriedades").innerHTML="";objmapa.ativaListaPropriedades("listaPropriedades")}remapaf()};i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=mudatamanho&altura="+a+"&largura="+l+"&g_sid="+i3GEO.configura.sid;var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,"mudaQS",temp)}else{YAHOO.janelaguias.xp.panel.render();YAHOO.janelaguias.xp.panel.show()}}function ativaGuias(){YAHOO.log("ativaGuias","i3geo");for(var g=0;g<12;g++){if($i("guia"+g))var gpai=$i("guia"+g).parentNode}if(gpai){gpai.id="guiasYUI";gpai.className="yui-navset";var ins='<ul class="yui-nav" style="border-width:0pt 0pt 0px;border-color:rgb(240,240,240);border-bottom-color:white;">';if($i(objmapa.guiaTemas)){$i(objmapa.guiaTemas).innerHTML=$trad("g1")}if($i(objmapa.guiaMenu)){$i(objmapa.guiaMenu).innerHTML=$trad("g2")}if($i(objmapa.guiaLegenda)){$i(objmapa.guiaLegenda).innerHTML=$trad("g3")}if($i(objmapa.guiaListaMapas)){$i(objmapa.guiaListaMapas).innerHTML=$trad("g4")}for(var g=0;g<12;g++){if($i("guia"+g)){var tituloguia=$i("guia"+g).innerHTML;var re=new RegExp("&nbsp;","g");var tituloguia=tituloguia.replace(re,'');ins+='<li><a href="#"><em><div id="guia'+g+'" >'+tituloguia+'</div></em></a></li>'}}ins+="</ul>";gpai.innerHTML=ins;for(var g=0;g<12;g++){if($i("guia"+g)){eval('$i("guia'+g+'").onclick = function(){g_guiaativa = "guia'+g+'";mostraguiaf('+g+');}');$i("guia"+g).onmouseover=function(){var bcg=this.parentNode.parentNode.style;var cor=bcg.background.split(" ")[0];if(cor!="white")bcg.background="#bfdaff"};$i("guia"+g).onmouseout=function(){var bcg=this.parentNode.parentNode.style;var cor=bcg.background.split(" ")[0];if(cor!="white")bcg.background="transparent"};if($i("guia"+g+"obj")){$i("guia"+g+"obj").style.overflow="auto";$i("guia"+g+"obj").style.height=objmapa.h}}}}if($i(objmapa.guiaTemas)){$i(objmapa.guiaTemas).onclick=function(){g_guiaativa=objmapa.guiaTemas;mostraguiaf(1)}}if($i(objmapa.guiaMenu)){$i(objmapa.guiaMenu).onclick=function(){g_guiaativa=objmapa.guiaMenu;mostraguiaf(2);if(!$i("arvoreAdicionaTema")){var ondeArvore=objmapa.guiaMenu+"obj"}else{var ondeArvore="arvoreAdicionaTema"}if(document.getElementById("outrasOpcoesAdiciona")){i3GEO.arvoreDeTemas.OPCOESADICIONAIS.idonde="outrasOpcoesAdiciona";i3GEO.arvoreDeTemas.OPCOESADICIONAIS.incluiArvore=false}i3GEO.arvoreDeTemas.cria(i3GEO.configura.sid,i3GEO.configura.locaplic,ondeArvore)}}if($i(objmapa.guiaLegenda)){$i(objmapa.guiaLegenda).onclick=function(){g_guiaativa=objmapa.guiaLegenda;mostraguiaf(4);objmapa.atualizaLegendaHTML()}}if($i(objmapa.guiaListaMapas)){$i(objmapa.guiaListaMapas).onclick=function(){g_guiaativa=objmapa.guiaListaMapas;mostraguiaf(5);if($i("banners")){$i("banners").innerHTML==$trad("o1");var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=pegaMapas&g_sid="+i3GEO.configura.sid;cpObj.call(p,"pegaMapas",pegaMapas)}else{alert("id banners nao encontrado")}}}YAHOO.log("Fim ativaGuias","i3geo")}function mudaiconf(i){try{YAHOO.log("mudaiconf","i3geo");if(objmapa.objtips.length>0){var ot=objmapa.objtips.length-1;if(ot>=0){do{if(objmapa.objtips[ot]){objmapa.objtips[ot].innerHTML="";objmapa.objtips[ot].style.display="none"}}while(ot--)}}objmapa.objtips=new Array();limpacontainerf();g_tipoacao=i;if($i("divGeometriasTemp")){$i("divGeometriasTemp").style.display="none"}YAHOO.log("Fim mudaiconf","i3geo")}catch(e){alert("Ocorreu um erro. mudaiconf"+e)}}function mostraguiaf(guia){if($i("guia"+guia)){var fs=[1,2,3,4,5,6,7,8,9,10,11,12];for(var j=0;j<10;j++){if($i("guia"+fs[j])){jj=fs[j];if($i("guia"+jj+"obj")){$i("guia"+jj+"obj").style.display="none"}$i("guia"+fs[j]).parentNode.parentNode.style.background="transparent"}}if($i("guia"+guia+"obj")){$i("guia"+guia+"obj").style.display="block"}else{alert("O objeto guia"+guia+"obj nao existe.")}$i("guia"+guia).parentNode.parentNode.style.background="white"}}function ativaClicks(docMapa){docMapa.onmouseover=function(){try{if($i("janelaMenu")){$i("janelaMenu").style.display="none"}this.src=g_quadrooriginal;if(objmapa.parado!="cancela"){objmapa.parado="nao"}if($i("tip")){$i("tip").style.display="none"}}catch(e){var e=""}this.onmousemove=function(exy){try{if($i("mostraUTM")){$i("mostraUTM").style.display="none"}if($i("tip")){$i("tip").style.display="none"}try{clearTimeout(objmapa.tempoParado)}catch(e){var a=e}objmapa.tempoParado=setTimeout('i3GEO.eventos.mouseParado()',i3GEO.configura.tempoMouseParado);capturaposicao(exy);if(g_destaca!=""){$i("div_d").style.clip='rect('+(objposicaocursor.imgy-destacaTamanho)+" "+(objposicaocursor.imgx-10)+" "+(objposicaocursor.imgy-10)+" "+(objposicaocursor.imgx-destacaTamanho)+')'}if($i("img")&&(g_panM=="sim")){var nx=objposicaocursor.telax-leftinicial-clicinicialx;var ny=objposicaocursor.telay-topinicial-clicinicialy;if(g_entorno=="nao"){var l=0;if(parseInt($i("i3geo").style.left)){var l=parseInt($i("i3geo").style.left)}$i("img").style.left=nx-l;var t=0;if(parseInt($i("i3geo").style.top)){var t=parseInt($i("i3geo").style.top)}$i("img").style.top=ny-t}else{$left("img",objmapa.w*-1+nx);$left("imgS",objmapa.w*-1+nx);$left("imgL",objmapa.w+nx);$left("imgO",objmapa.w*-3+nx);$left("imgN",objmapa.w*-1+nx);$top("img",objmapa.h*-1+ny);$top("imgS",objmapa.h*-1+ny);$top("imgL",objmapa.h*-1+ny);$top("imgN",objmapa.h*-1+ny);$top("imgO",objmapa.h*-1+ny)}}}catch(e){var e=""}try{objmapa.verificaMousemoveMapa()}catch(e){var e=""}}};docMapa.onmouseout=function(){try{objmapa.parado="parar";mostradicasf(this,'')}catch(e){var e=""}};docMapa.onmousedown=function(exy){try{capturaposicao(exy);if((g_tipoacao=="zoomli")||(g_tipoacao=="selecaobox")){if($i("box1")){var i=$i("box1").style;i.width=0;i.height=0;i.visibility="visible";i.display="none";i.left=objposicaocursor.telax+g_postpx;i.top=objposicaocursor.telay+g_postpx}boxxini=objposicaocursor.telax;boxyini=objposicaocursor.telay;tamanhox=0;tamanhoy=0}if($i("img")&&(g_tipoacao=="pan")){g_panM="sim";if($i("corpoMapa")){leftinicial=parseInt($i("corpoMapa").style.left);topinicial=parseInt($i("corpoMapa").style.top)}clicinicialx=objposicaocursor.imgx;clicinicialy=objposicaocursor.imgy;ddinicialx=objposicaocursor.ddx;ddinicialy=objposicaocursor.ddy}}catch(e){var e=""}};docMapa.onclick=function(){try{objmapa.verificaClickMapa()}catch(e){var e=""}};docMapa.onmouseup=function(){try{if(g_tipoacao=="zoomli"){zoomboxf("termina")}if(g_tipoacao=="selecaobox"){zoomboxf("termina")}if($i("img")&&(g_tipoacao=="pan")){g_panM="nao";var disty=(ddinicialy*-1)+objposicaocursor.ddy;var distx=(ddinicialx*-1)+objposicaocursor.ddx;var ex=objmapa.extent;var ex=ex.split(" ");var novoxi=(ex[0]*1)-distx;var novoxf=(ex[2]*1)-distx;var novoyi=(ex[1]*1)-disty;var novoyf=(ex[3]*1)-disty;if((distx==0)||(disty==0)){i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=pan&x="+objposicaocursor.imgx+"&y="+objposicaocursor.imgy+"&g_sid="+i3GEO.configura.sid;cpObj.call(p,"pan",ajaxredesenha);return}var nex=novoxi+" "+novoyi+" "+novoxf+" "+novoyf;i3GEO.navega.zoomExt(i3GEO.configura.locaplic,i3GEO.configura.sid,g_tipoimagem,nex)}}catch(e){var e=""}}}function zoomAnterior(){try{var n=quadrosfilme.length;var muda=0;for(var i=(n-1);i>0;i--){if(quadrosfilme[i].extensao!=' '&&quadrosfilme[i].extensao==objmapa.extent){var muda=i-1;break}}if(quadrosfilme[muda].extensao!=" "){g_zoomProximo.push(objmapa.extent);i3GEO.navega.zoomExt(i3GEO.configura.locaplic,i3GEO.configura.sid,g_tipoimagem,quadrosfilme[muda].extensao);for(var i=n-1;i>muda;i--){$i("f"+(i)).className="quadro";var qu=new quadrofilme();quadrosfilme[i]=qu}}}catch(e){var e=""}}function zoomProximo(){try{var n=g_zoomProximo.length;if(n>0&&g_zoomProximo[n-1]!=objmapa.extent){i3GEO.navega.zoomExt(i3GEO.configura.locaplic,i3GEO.configura.sid,g_tipoimagem,g_zoomProximo[n-1]);g_zoomProximo.pop()}}catch(e){var e=""}}function mostraRosaDosVentos(){if(i3GEO.configura.mostraRosaDosVentos=="nao"){return}if(objposicaocursor.imgx<10||objposicaocursor.imgy<10){return}if(!$i("i3geo_rosa")){var novoel=document.createElement("div");novoel.id="i3geo_rosa";novoel.style.position="absolute";novoel.style.zIndex=5000;if(navn){novoel.style.opacity=".7"}else{novoel.style.filter="alpha(opacity=70)"}document.body.appendChild(novoel)}var setas="<table id='rosaV' >";setas+="<tr onclick=\"javascript:i3GEO.configura.mostraRosaDosVentos='nao'\"><td></td><td></td><td style=cursor:pointer >x</td></tr><tr>";setas+="<td><img class='rosanoroeste' title='noroeste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','noroeste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td>";setas+="<td><img class='rosanorte' title='norte' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','norte','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td>";setas+="<td><img class='rosanordeste' title='nordeste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','nordeste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td></tr>";setas+="<tr><td><img class='rosaoeste' title='oeste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','oeste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td>";setas+="<td><table><tr>";setas+="<td><img class='rosamais' title='aproxima' onclick=\"i3GEO.navega.zoomin('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"')\" src='"+$im("branco.gif")+"' </td>";setas+="<td><img class='rosamenos' title='afasta' onclick=\"i3GEO.navega.zoomout('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"')\" src='"+$im("branco.gif")+"' </td>";setas+="</tr></table></td>";setas+="<td><img class='rosaleste' title='leste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','leste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td></tr>";setas+="<tr><td><img class='rosasudoeste' title='sudoeste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','sudoeste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td>";setas+="<td><img class='rosasul' title='sul' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','sul','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td>";setas+="<td><img class='rosasudeste' title='sudeste' src='"+$im("branco.gif")+"' onclick=\"i3GEO.navega.panFixo('"+i3GEO.configura.locaplic+"','"+i3GEO.configura.sid+"','sudeste','"+objmapa.w+"','"+objmapa.h+"','"+objmapa.scale+"')\" /></td></tr></table>";var i=$i("i3geo_rosa");i.innerHTML=setas;i.style.top=objposicaocursor.telay-27;i.style.left=objposicaocursor.telax-27;i.style.display="block";var temp=function(){var i=$i("i3geo_rosa");i.style.display="none";$i("img").removeEventListener('mousemove',temp,false)}if($i("img"))$i("img").addEventListener('mousemove',temp,false)i3GEO.ajuda.mostraJanela('Clique nas pontas da rosa para navegar no mapa. Clique em x para parar de mostrar essa opção.')}function initJanelaRef(){YAHOO.log("initJanelaRef","i3geo");if(!$i("winRef")){var novoel=document.createElement("div");novoel.id="winRef";novoel.style.display="none";novoel.style.borderColor="gray";var ins='<div class="hd">';var temp="javascript:if(g_zoomRefDinamico == -1){g_zoomRefDinamico = 1};g_zoomRefDinamico = g_zoomRefDinamico + 1 ;$i(\"refDinamico\").checked = true;objmapa.atualizaReferencia();";ins+="<img class=mais onclick='"+temp+"' src="+$im("branco.gif")+" />";var temp="javascript:if(g_zoomRefDinamico == 1){g_zoomRefDinamico = -1};g_zoomRefDinamico = g_zoomRefDinamico - 1 ;$i(\"refDinamico\").checked = true;objmapa.atualizaReferencia();";ins+="<img class=menos onclick='"+temp+"' src="+$im("branco.gif")+" />&nbsp;";ins+='<input style="cursor:pointer" onclick="javascript:objmapa.atualizaReferencia()" type="checkbox" id="refDinamico" />&nbsp;'+$trad("o6")+'</div>';ins+='<div class="bd" style="text-align:left;padding:3px;" id="mapaReferencia" onmouseover="javascript:movimentoRef(this)" onclick="javascript:clicouRef()">';ins+='<img style="cursor:pointer;" id=imagemReferencia src="" >';ins+='<div id=boxRef style="position:absolute;top:0px;left:0px;width:10px;height:10px;border:2px solid blue;display:none"></div></div>';ins+='<div style="text-align:left;font-size:0px" id="refmensagem" ></div></div>';novoel.innerHTML=ins;document.body.appendChild(novoel);$i("imagemReferencia").style.height=objmapa.refheight+"px"}if($i("winRef").style.display!="block"){$i("winRef").style.display="block";YAHOO.namespace("janelaRef.xp");YAHOO.janelaRef.xp.panel=new YAHOO.widget.Panel("winRef",{width:"156px",fixedcenter:false,constraintoviewport:true,underlay:"shadow",close:true,visible:true,draggable:true,modal:false});YAHOO.janelaRef.xp.panel.render();var pos=i3GEO.util.pegaPosicaoObjeto($i("img"));if(navm){YAHOO.janelaRef.xp.panel.moveTo((pos[0]+objmapa.w-160),pos[1]+4)}else{YAHOO.janelaRef.xp.panel.moveTo((pos[0]+objmapa.w-160),pos[1]+4)}var escondeRef=function(){YAHOO.util.Event.removeListener(YAHOO.janelaRef.xp.panel.close,"click");YAHOO.janelaRef.xp.panel.destroy();i3GEO.util.insereCookie("g_mapaRefDisplay","none")};YAHOO.util.Event.addListener(YAHOO.janelaRef.xp.panel.close,"click",escondeRef);i3GEO.util.insereCookie("g_mapaRefDisplay","block")}YAHOO.log("Fiim initJanelaRef","i3geo");objmapa.atualizaReferencia()}function movelentef(){try{if($i("lente")){if($i("lente").style.visibility=="visible"){var pos=i3GEO.util.pegaPosicaoObjeto($i("img"));var esq=(objposicaocursor.telax-pos[0])*2.25;var topo=(objposicaocursor.telay-pos[1])*2.25;var clipt="rect("+(topo-40)+" "+(esq+40)+" "+(topo+40)+" "+(esq-40)+")";var i=$i("lente").style;i.clip=clipt;eval("i."+g_tipotop+"= (pos[1] - (topo - 40)) + g_postpx");eval("i."+g_tipoleft+"= (pos[0] - (esq - 40)) + g_postpx")}}}catch(e){var e=""}}function zoomboxf(tipo){var pos=i3GEO.util.pegaPosicaoObjeto($i("img"));if($i("box1")){var bx=$i("box1");var bxs=bx.style}else{alert("Box nao encontrado");return}switch(tipo){case"desloca":bxs.display="block";ppx=objposicaocursor.telax;py=objposicaocursor.telay;if(navm){if((ppx>boxxini)&&((ppx-boxxini-2)>0)){bxs.width=ppx-boxxini-2}if((py>boxyini)&&((py-boxyini-2)>0)){bxs.height=py-boxyini-2}if(ppx<boxxini){bxs.left=ppx;bxs.width=boxxini-ppx+2}if(py<boxyini){bxs.top=py;bxs.height=boxyini-py+2}}else{if(ppx>boxxini){bxs.width=ppx-boxxini+"px"}if(py>boxyini){bxs.height=py-boxyini+"px"}if(ppx<boxxini){bxs.left=ppx+"px";bxs.width=boxxini-ppx+"px"}if(py<boxyini){bxs.top=py+"px";bxs.height=boxyini-py+"px"}}break;case"termina":md=1;eval('pix = parseInt(document.getElementById("box1").style.'+g_tipoleft+")");eval('piy = parseInt(document.getElementById("box1").style.'+g_tipotop+")");xfig0=parseInt(bxs.width)-pos[0];yfig0=parseInt(bxs.height)-pos[1];xfig=pix+(parseInt(bxs.width))-pos[0];yfig=piy+(parseInt(bxs.height))-pos[1];amext=objmapa.extent.split(" ");dx=((amext[0]*-1)-(amext[2]*-1))/(tamanhox-1);dy=((amext[1]*1)-(amext[3]*1))/(tamanhoy-1);if(dy<0)dy=dy*-1;nx=g_celula*xfig;ny=g_celula*yfig;x1=(amext[0]*1)+nx;y1=(amext[3]*1)-ny;xfig=pix-pos[0];yfig=piy-pos[1];if(dy<0)dy=dy*-1;nx=g_celula*xfig;ny=g_celula*yfig;x2=(amext[0]*1)+nx;y2=(amext[3]*1)-ny;v=x2+" "+y2+" "+x1+" "+y1;if(g_tipoacao!="selecaobox"){if(x1!=x2){objmapa.extent=v;i3GEO.navega.zoomExt(i3GEO.configura.locaplic,i3GEO.configura.sid,g_tipoimagem,v)}}else{if(x1!=x2){try{var doc=(navm)?document.frames("wdocai").document:$i("wdocai").contentDocument;var tipo="adiciona";if(doc.getElementById("tipoOperacao")){tipo=doc.getElementById("tipoOperacao").value}if(objmapa.temaAtivo==""){alert("Nenhum tema ativo");return}if((tipo!="limpa")&&(tipo!="inverte")){i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=selecaobox&ext="+v+"&g_sid="+i3GEO.configura.sid+"&tipo="+tipo+"&tema="+objmapa.temaAtivo;cpObj.call(p,"selecaobox",ajaxredesenha)}}catch(e){var e=""}}}bxs.visibility="hidden";bxs.width=0;bxs.height=0;break}}function clicouRef(){try{i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=pan&escala="+objmapa.scale+"&tipo=ref&x="+objposicaocursor.refx+"&y="+objposicaocursor.refy+"&g_sid="+i3GEO.configura.sid;cpObj.call(p,"pan",ajaxredesenha)}catch(e){var e="";i3GEO.janela.fechaAguarde("ajaxredesenha")}}function movimentoRef(obj){obj.onmousemove=function(exy){capturaposicao(exy)}}function ativaEntorno(){if(objmapa.mapfile==""){alert("Essa opcao nao pode ser ativada. Consulte o administrador do sistema. Mapfile nao esta exposto.");return}if(g_entorno=="sim"){var letras=["L","O","N","S"];for(var l=0;l<4;l++){if($i("img"+letras[l])){$i("img"+letras[l]).style.display="none";$i("img"+letras[l]).src=""}}$left("img",0);$top("img",0);g_entorno="nao";alert("Entorno desativado");$i("img").style.visibility="visible";$i("img").style.display="block"}else{geraURLentorno();var letras=["L","O","N","S"];for(var l=0;l<4;l++){if($i("img"+letras[l])){$i("img"+letras[l]).style.width=objmapa.w;$i("img"+letras[l]).style.height=objmapa.h;$i("img"+letras[l]).style.display="block"}}g_entorno="sim";ajustaEntorno();alert("Entorno ativado. o desenho do mapa pode demorar mais.")}}function geraURLentorno(){var nny=(objmapa.h/2)*-1;var nnx=objmapa.w/2;var sy=objmapa.h+(objmapa.h/2);var sx=objmapa.w/2;var lx=objmapa.w+(objmapa.w/2);var ly=objmapa.h/2;var ox=(parseInt(objmapa.w/2))*-1;var oy=objmapa.h/2;var u=window.location.protocol+"\/\/"+window.location.host+objmapa.cgi+"?map="+objmapa.mapfile;u+="&mode=map&imgext="+objmapa.extent+"&mapsize="+nnx+" "+oy;var sul=u+"&imgxy="+sx/2+" "+sy/2;var norte=u+"&imgxy="+nnx/2+" "+nny/2;var leste=u+"&imgxy="+lx/2+" "+ly/2;var oeste=u+"&imgxy="+ox/2+" "+oy/2;$i("imgS").src=sul;$i("imgN").src=norte;$i("imgL").src=leste;$i("imgO").src=oeste}function ajustaEntorno(){$left("img",objmapa.w*-1);$left("imgS",objmapa.w*-1);$left("imgL",objmapa.w);$left("imgO",objmapa.w*-3);$left("imgN",objmapa.w*-1);$top("img",objmapa.h*-1);$top("imgS",objmapa.h*-1);$top("imgL",objmapa.h*-1);$top("imgN",objmapa.h*-1);$top("imgO",objmapa.h*-1)}function verificaTip(){if(g_operacao!="identifica"){return}if(!$i("tip")){var novoel=document.createElement("div");novoel.id="tip";novoel.style.position="absolute";novoel.style.zIndex=5000;if(navm){novoel.style.filter="alpha(opacity=90)"}document.body.appendChild(novoel)}if((g_operacao=="identifica")&&($i("tip").style.display!="block")){var i=$i("tip");var ist=i.style;ist.top=objposicaocursor.telay+20;ist.left=objposicaocursor.telax;i.innerHTML="<table style='text-align:left'><tr><td style='text-align:left'>Pesquisando...</td></tr></table>";ist.display="block";eval(g_funcaoTip)}}function verificaTipDefault(){YAHOO.log("verificaTipDefault","i3geo");var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=identifica&opcao=tip&xy="+objposicaocursor.ddx+","+objposicaocursor.ddy+"&resolucao=5&g_sid="+i3GEO.configura.sid;var cp=new cpaint();cp.set_persistent_connection(true);cp.set_response_type("JSON");cp.call(p,"identifica",mostraTip)}function mostraTip(retorno){var mostra=false;var retorno=retorno.data;if((retorno!="erro")&&(retorno!=undefined)){if($i("img")){$i("img").title=""}if(retorno!=""){var res="<div id='cabecatip' style='text-align:left;background-color:rgb(240,240,240)'><span style='color:navy;cursor:pointer;text-align:left' onclick='javascript:objmapa.parado=\"cancela\"'>parar&nbsp;&nbsp;</span>";res+="<span style='color:navy;cursor:pointer;text-align:left' onclick='javascript:objmapa.objtips.push($i(\"tip\"));$i(\"tip\").id=\"\";$i(\"cabecatip\").innerHTML =\"\";$i(\"cabecatip\").id =\"\"' >fixar</span></div>";var temas=retorno.split("!");var tema=temas.length-1;if(tema>=0){do{var titulo=temas[tema].split("@");if(g_tipotip=="completo"){res+="<span style='text-align:left;font-size:9pt'><b>"+titulo[0]+"</b></span><br>"}var ocorrencias=titulo[1].split("*");var ocorrencia=ocorrencias.length-1;if(ocorrencia>=0){do{if(ocorrencias[ocorrencia]!=""){var pares=ocorrencias[ocorrencia].split("##");var paresi=pares.length;for(var par=0;par<paresi;par++){var valores=pares[par].split("#");if(g_tipotip=="completo"){res=res+"<span class='tiptexto' style='text-align:left;font-size:9pt'>"+valores[0]+" <i>"+valores[1]+"</i></span><br>";var mostra=true}else{res=res+"<span class='tiptexto' style='text-align:left;font-size:9pt'><i>"+valores[1]+"</i></span><br>";var mostra=true}}}}while(ocorrencia--)}}while(tema--)}if(!mostra){$i("tip").style.display="none";return}if($i("janelaMen")){$i("janelaMenTexto").innerHTML=res}else{var i=$i("tip");i.innerHTML="<table style='text-align:left'><tr><td style='text-align:left'>"+res+"</td></tr></table>";ist=i.style;ist.top=objposicaocursor.telay-10;ist.left=objposicaocursor.telax-20;ist.display="block"}}}YAHOO.log("Fim mostraTip","i3geo")}function legendaGrafico(par){try{var temp=par.split("*");var par="<table>";var i=temp.length-1;if(i>=0){do{var t=temp[i];var t=t.split(",");par+="<tr style='text-align:left'><td style='background-color:rgb("+t[1]+","+t[2]+","+t[3]+")'>&nbsp;&nbsp;</td><td style='text-align:left'>"+t[0]+"</td></tr>"}while(i--)}par+="</table>";if(!$i("legendagr")){var novoel=document.createElement("div");var temp='<div class="hd">Legenda</div>';temp+='<div class="bd">';temp+='<div id="contemleggr" ></div></div>';novoel.id="legendagr";novoel.style.display="block";novoel.style.textAlign="left";novoel.innerHTML=temp;document.body.appendChild(novoel);YAHOO.namespace("legendagr.xp");YAHOO.legendagr.xp.panel=new YAHOO.widget.Panel("legendagr",{width:"250px",fixedcenter:true,constraintoviewport:false,underlay:"none",close:true,visible:true,draggable:true,modal:false})}$i("contemleggr").innerHTML=par;YAHOO.legendagr.xp.panel.render();YAHOO.legendagr.xp.panel.show()}catch(e){alert("Ocorreu um erro. legendaGrafico"+e)}}function atualizagoogle(){YAHOO.log("atualizagoogle","i3geo");if(frames["wdocai"]){if(navn){if($i("wdocai")){var doc=$i("wdocai").contentDocument}}else{if(document.frames("wdocai")){var doc=document.frames("wdocai").document}}if(doc){if(doc.getElementById("map")){if(window.parent.frames["wdocai"].panTogoogle){window.parent.frames["wdocai"].panTogoogle()}}}}YAHOO.log("Fiim atualizagoogle","i3geo")}function atualizascielo(){YAHOO.log("atualizascielo","i3geo");if($i("wdocai")){if(window.parent.frames["wdocai"]){var docel=(navm)?document.frames("wdocai").document:$i("wdocai").contentDocument;if(docel.getElementById("resultadoscielo")){$i("wdocai").src=i3GEO.configura.locaplic+"/ferramentas/scielo/index.htm"}}}YAHOO.log("Fim atualizascielo","i3geo")}function atualizaconfluence(){YAHOO.log("atualizaconfluence","i3geo");if($i("wdocai")){if(window.parent.frames["wdocai"]){var docel=(navm)?document.frames("wdocai").document:$i("wdocai").contentDocument;if(docel.getElementById("resultadoconfluence")){$i("wdocai").src=i3GEO.configura.locaplic+"/ferramentas/confluence/index.htm"}}}YAHOO.log("Fim atualizaconfluence","i3geo")}function atualizawiki(){YAHOO.log("atualizawiki","i3geo");if($i("wdocai")){if(window.parent.frames["wdocai"]){var docel=(navm)?document.frames("wdocai").document:$i("wdocai").contentDocument;if(docel.getElementById("resultadowiki")){$i("wdocai").src=i3GEO.configura.locaplic+"/ferramentas/wiki/index.htm"}}}YAHOO.log("Fim atualizawiki","i3geo")}function i3geo_comboGruposMenu(funcaoOnchange,idDestino,idCombo,largura,altura){var combo=function(retorno){obGrupos=retorno.data;var ins="<select id='"+idCombo+"' SIZE="+altura+" style=width:"+largura+"px onchange='"+funcaoOnchange+"(this.value)' ><option value='' >Escolha um grupo:</option>";for(ig=0;ig<obGrupos.grupos.length;ig++){if(obGrupos.grupos[ig].nome)ins+="<option value="+ig+" >"+obGrupos.grupos[ig].nome+"</option>"}$i(idDestino).innerHTML=ins+"</select>"};var p="classesphp/mapa_controle.php?funcao=pegalistadegrupos&map_file=''&listasgrupos=nao";var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,"pegalistadegrupos",combo)}function i3geo_comboSubGruposMenu(funcaoOnchange,idDestino,idCombo,idGrupo,largura,altura){if(idGrupo!=""){var combo=function(retorno){var ins="<select id='"+idCombo+"' size="+altura+" style=width:"+largura+"px onchange='"+funcaoOnchange+"("+idGrupo+",this.value)' ><option value='' >Escolha um sub-grupo:</option>";if(retorno.data.subgrupo){var sg=retorno.data.subgrupo;for(ig=0;ig<sg.length;ig++){ins+="<option value="+ig+" >"+sg[ig].nome+"</option>"}}$i(idDestino).innerHTML=ins+"</select>"};var p="classesphp/mapa_controle.php?funcao=pegalistadeSubgrupos&map_file=''&grupo="+idGrupo;var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,"pegalistadeSubgrupos",combo)}}function i3geo_comboTemasMenu(funcaoOnchange,idDestino,idCombo,idGrupo,idSubGrupo,largura,altura){var combo=function(retorno){var ins="<select id='"+idCombo+"' size="+altura+" style=width:"+largura+"px onchange='"+funcaoOnchange+"("+idGrupo+","+idSubGrupo+",this.value)' ><option value='' >Escolha um tema:</option>";if(retorno.data.temas[i]){var sg=retorno.data.temas;for(ig=0;ig<sg.length;ig++){ins+="<option value="+sg[ig].tid+" >"+sg[ig].nome+"</option>"}}$i(idDestino).innerHTML=ins+"</select>"};var p="classesphp/mapa_controle.php?funcao=pegalistadetemas&map_file=''&grupo="+idGrupo+"&subgrupo="+idSubGrupo;var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,"pegalistadetemas",combo)}function pegaMapas(retorno){var ins="<br>";var mapa=retorno.data.mapas;var ig1lt=mapa.length;var ig1=0;if(ig1lt>0){do{var nome=mapa[ig1].NOME;if(mapa[ig1].PUBLICADO){if(mapa[ig1].PUBLICADO=="NAO"||mapa[ig1].PUBLICADO=="nao"){var nome="<s>"+nome+"</s>"}}var descricao=mapa[ig1].DESCRICAO;var imagem=mapa[ig1].IMAGEM;var temas=mapa[ig1].TEMAS;var ligados=mapa[ig1].LIGADOS;var extensao=mapa[ig1].EXTENSAO;var outros=mapa[ig1].OUTROS;var lkd=mapa[ig1].LINK;var link=i3GEO.configura.locaplic+"/ms_criamapa.php?temasa="+temas+"&layers="+ligados;if(extensao!=""){link+="&mapext="+extensao}if(outros!=""){link+="&"+outros}if(lkd!=""){var link=lkd}ins+="<div><a href='"+link+"'><img src='"+imagem+"'></a></div><br>";ins+="<div><p>"+nome+"</p></div><br>";ig1++}while(ig1<ig1lt)}$i("banners").innerHTML=ins}function arvoreclick(itemID){if(itemID.search("tema")==0){if($i(itemID).checked==true){$i(itemID).checked=false}else{$i(itemID).checked=true}}}function pegaTema(celula){var nos=celula.parentNode.childNodes;var tempi=nos.length;for(var no=0;no<tempi;no++){if(nos[no].type=="checkbox"){return nos[no].value}}}function autoRedesenho(opcao){if(opcao=="desativa"){g_autoRedesenho=0;clearTimeout(objmapa.tempoRedesenho);clearTimeout(objmapa.contaTempoRedesenho);objmapa.tempoRedesenho="";objmapa.contaTempoRedesenho="";objmapa.tempoRedesenho="";if($i("tempoRedesenho")){$i("tempoRedesenho").style.display="none"}}if(opcao=="ativa"){if(($i("tempoRedesenho"))&&(g_autoRedesenho>0)){$i("tempoRedesenho").style.display="block"}if(g_autoRedesenho>0){objmapa.tempoRedesenho=setTimeout('autoRedesenho("redesenha")',g_autoRedesenho)}if(($i("tempoRedesenho"))&&(g_autoRedesenho>0)){$i("tempoRedesenho").innerHTML=g_autoRedesenho/1000;objmapa.contaTempoRedesenho=setTimeout('autoRedesenho("contagem")',1000)}}if(opcao=="redesenha"){clearTimeout(objmapa.tempoRedesenho);clearTimeout(objmapa.contaTempoRedesenho);remapaf();autoRedesenho("ativa")}if(opcao=="contagem"){if($i("tempoRedesenho")){$i("tempoRedesenho").innerHTML=parseInt($i("tempoRedesenho").innerHTML)-1;objmapa.contaTempoRedesenho=setTimeout('autoRedesenho("contagem")',1000)}}}function remapaf(){YAHOO.log("remapaf","i3geo");clearTimeout(objmapa.tempo);objmapa.tempo="";objmapa.temaAtivo="";if($i(objmapa.guiaTemas+"obj")){if(g_operacao=="legenda"){var iguias=$i("legenda").getElementsByTagName("input")}else{var iguias=$i(objmapa.guiaTemas+"obj").getElementsByTagName("input")}var tsl=new Array();var tsd=new Array();var i=iguias.length-1;if(i>=0){do{if(iguias[i].type=="checkbox"){if(iguias[i].name=="layer"){if(iguias[i].checked==false){tsd.push(iguias[i].value)}if(iguias[i].checked==true){tsl.push(iguias[i].value)}}}}while(i--)}var remapaAdicNovos=function remapaAdicNovos(retorno){if($i("buscatema")){var g=$i(objmapa.guiaMenu+"obj");if($i("arvoreAdicionaTema")){var g=$i("arvoreAdicionaTema")}var iguias=g.getElementsByTagName("input");var ta=new Array();var i=iguias.length-1;if(i>=0){do{if(iguias[i].type=="checkbox"){if(iguias[i].checked==true){ta.push(iguias[i].value);iguias[i].checked=false}}}while(i--)}if(ta.length>0){i3GEO.janela.fechaAguarde("remapa");i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var temp=function(retorno){i3GEO.janela.fechaAguarde("ajaxredesenha");if(retorno.data.erro){alert(retorno.data.erro);return}ajaxredesenha("")};var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=adtema&temas="+(ta.toString())+"&g_sid="+i3GEO.configura.sid;cpObj.call(p,"adicionaTema",temp)}else{i3GEO.janela.fechaAguarde("remapa");i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));ajaxredesenha("")}}else{i3GEO.janela.fechaAguarde("remapa");i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));ajaxredesenha("")}};if((tsd.length>0)||(tsl.length>0)){i3GEO.janela.abreAguarde("remapa",$trad("o1"));var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=ligatemas&desligar="+(tsd.toString())+"&ligar="+(tsl.toString())+"&g_sid="+i3GEO.configura.sid;cpObj.call(p,"ligaDesligaTemas",remapaAdicNovos)}else{remapaAdicNovos()}i3GEO.janela.fechaAguarde("remapa")}else{remapaAdicNovos()}YAHOO.log("FIm remapaf","i3geo")}function calcposf(){try{YAHOO.log("calcposf","i3geo");imagemxi=0;imagemyi=0;imagemxref=0;imagemyref=0;if(!$i("i3geo")){return}if($i("i3geo").style.left){imagemxi+=parseInt($i("i3geo").style.left)}if($i("i3geo").style.top){imagemyi+=parseInt($i("i3geo").style.top)}var dc=$i("i3geo");if($i("contemImg")){var dc=$i("contemImg")}else{var dc=$i("img")}if($i("openlayers")){var dc=$i("openlayers")}if($i("flamingo")){var dc=$i("flamingo")}while((dc.offsetParent)&&(dc.offsetParent.id!="i3geo")){dc=dc.offsetParent;imagemxi=imagemxi+dc.offsetLeft;imagemyi=imagemyi+dc.offsetTop}if($i("corpoMapa")){$i("corpoMapa").style.position="absolute";$left("corpoMapa",imagemxi);$top("corpoMapa",imagemyi);if($i("i3geo").style.left){$left("corpoMapa",imagemxi-parseInt($i("i3geo").style.left))}if($i("i3geo").style.top){$top("corpoMapa",imagemyi-parseInt($i("i3geo").style.top))}}if($i("ref")){var dc=$i("ref");while(dc.offsetParent.id!="i3geo"){dc=dc.offsetParent;imagemxref=imagemxref+dc.offsetLeft;imagemyref=imagemyref+dc.offsetTop}}if($i("aguarde")){$top("aguarde",imagemyi);$left("aguarde",imagemxi)}YAHOO.log("Fim calcposf","i3geo")}catch(e){alert("Ocorreu um erro. calcposf"+e)}}function capturaposicao(e){if(!e)var e=window.event;if(e.target){var targ=e.target}else if(e.srcElement)var targ=e.srcElement;if(targ.id==""&&$i("img")){var targ=$i("img")}if(g_panM=="sim"){var pos=i3GEO.util.pegaPosicaoObjeto(targ.parentNode)}else{var pos=i3GEO.util.pegaPosicaoObjeto(targ)}if((g_entorno=="sim")&&(g_panM=="sim")){pos[0]=pos[0]-objmapa.w;pos[1]=pos[1]-objmapa.h}var mousex=0;var mousey=0;if(e.pageX||e.pageY){mousex=e.pageX;mousey=e.pageY}else if(e.clientX||e.clientY){mousex=e.clientX+document.body.scrollLeft+document.documentElement.scrollLeft;mousey=e.clientY+document.body.scrollTop+document.documentElement.scrollTop}var xfig=mousex-pos[0];var yfig=mousey-pos[1];var xreffig=xfig;var yreffig=yfig;var xtela=mousex;var ytela=mousey;var c=g_celula;var ex=objmapa.extent;if(targ.id=="imagemReferencia"){var c=g_celularef;var ex=objmapa.extentref}var teladd=i3GEO.util.tela2dd(xfig,yfig,c,ex);var teladms=i3GEO.util.dd2dms(teladd[0],teladd[1]);objposicaocursor.ddx=teladd[0];objposicaocursor.ddy=teladd[1];objposicaocursor.dmsx=teladms[0];objposicaocursor.dmsy=teladms[1];objposicaocursor.telax=xtela;objposicaocursor.telay=ytela;objposicaocursor.imgx=xfig;objposicaocursor.imgy=yfig;objposicaocursor.refx=xreffig;objposicaocursor.refy=yreffig;ajaxTip=""}function gerafilmef(qs){try{if($i("lugarquadros")){var q="<table class=tablefilme ><tr><td><div class='menuarrow'  title='op&ccedil;&otilde;es' onclick='opcoesQuadros()' style='cursor:pointer'></div></td>";for(var i=0;i<qs;i++){q=q+"<td><img class='quadro' src=\""+g_localimg+"/branco.gif\" id=f"+i+"  onmouseover='filmef(this);mostradicasf(this,\"Quadro - clique para restaurar\",\"quadro\")' onmouseout=\"javascript:mostradicasf(this,'')\" onclick='filmezf(this)' /></td>";var qu=new quadrofilme();quadrosfilme[i]=qu}var finalq="</tr></table>";document.getElementById("lugarquadros").innerHTML=q+finalq}}catch(e){var e=""}}function gravaQuadro(variavel,valor){try{var muda=-1;if($i("lugarquadros")){var nquadros=quadrosfilme.length;if(quadrosfilme[nquadros-1].imagem!=" "){quadrosfilme.shift();var qu=new quadrofilme();quadrosfilme.push(qu)}for(var i=0;i<nquadros;i++){if((eval("quadrosfilme["+i+"]."+variavel+" == ' '"))&&(muda<0)){var muda=i}}if(eval("quadrosfilme["+(muda)+"]")){eval("quadrosfilme["+(muda)+"]."+variavel+"='"+valor+"'")}}}catch(e){var e=""}}function avancaQuadro(){try{var muda=-1;if($i("lugarquadros")){var nquadros=quadrosfilme.length;for(var i=0;i<nquadros;i++){if((quadrosfilme[i].imagem==" ")&&(muda<0)){var muda=i}}$i("f"+muda).className="quadro1"}}catch(e){var e=""}}function filmef(o){try{if($i("lugarquadros")){var v=(o.id).replace("f","");if(quadrosfilme[v].imagem!=" "){$i("img").src=quadrosfilme[v].imagem}}}catch(e){var e=""}}function rebobinaf(){try{janima=0;var nquadros=quadrosfilme.length;for(var i=0;i<nquadros;i++){$i("f"+i).className="quadro";with(quadrosfilme[i]){imagem=" ";escala=" ";legenda=" ";extensao=" ";referencia=" "}}}catch(e){var e=""}}function filmezf(o){if(o.id){var quadro=(o.id).replace("f","")}else{var quadro=o}if(quadrosfilme[quadro].extensao!=" "){i3GEO.navega.zoomExt(i3GEO.configura.locaplic,i3GEO.configura.sid,g_tipoimagem,quadrosfilme[quadro].extensao)}else{alert("Extensao nao definida")}}function filmeanimaf(){preLoad=new Array();var tempi=quadrosfilme.length;for(var i=0;i<tempi;i++){$i("f"+i).className="quadro";if(quadrosfilme[i].imagem!=" "){preLoad[i]=new Image();preLoad[i].src=quadrosfilme[i].imagem}}filmeanimarodaf(0)}function filmeanimarodaf(janima){if(janima<quadrosfilme.length){$i("img").src=preLoad[janima].src;$i("f"+janima).className="quadro1";janima=janima+1;var doc=(navm)?document.frames("wdocai").document:$i("wdocai").contentDocument;var ti=doc.getElementById("tempoanima").value;t=setTimeout('filmeanimarodaf('+janima+')',ti)}}function quadrofilme(){this.imagem=" ";this.escala=" ";this.legenda=" ";this.extensao=" ";this.referencia=" "}function calculaArea(){try{if(pontosdistobj.xpt.length>2){var $array_length=pontosdistobj.xpt.length;pontosdistobj.xtela.push(pontosdistobj.xtela[0]);pontosdistobj.ytela.push(pontosdistobj.ytela[0]);pontosdistobj.xtela.push(pontosdistobj.xtela[0]);pontosdistobj.ytela.push(pontosdistobj.ytela[1]);var $polygon_area=0;for(var $i=0;$i<=$array_length;$i++){$polygon_area+=((pontosdistobj.xtela[$i]*pontosdistobj.ytela[$i+1])-(pontosdistobj.ytela[$i]*pontosdistobj.xtela[$i+1]))}$polygon_area=Math.abs($polygon_area)/2}else{$polygon_area="Sao necessarios pelo menos tres pontos para o calculo"}return $polygon_area*g_areapixel}catch(e){return(0)}}function calculadistancia(lga,lta,lgb,ltb){try{var er=6366.707;var radlat1=Math.PI*lta/180;var radlat2=Math.PI*ltb/180;var radlong1=Math.PI*lga/180;var radlong2=Math.PI*lgb/180;if(lta>0){radlat1=Math.PI/2-radlat1}if(lta<0){radlat1=Math.PI/2+radlat1}if(lga<0){radlong1=Math.PI*2-radlong1}if(ltb>0){radlat2=Math.PI/2-radlat2}if(ltb<0){radlat2=Math.PI/2+radlat2}if(lgb<0){radlong2=Math.PI*2-radlong2}var x1=er*Math.cos(radlong1)*Math.sin(radlat1);var y1=er*Math.sin(radlong1)*Math.sin(radlat1);var z1=er*Math.cos(radlat1);var x2=er*Math.cos(radlong2)*Math.sin(radlat2);var y2=er*Math.sin(radlong2)*Math.sin(radlat2);var z2=er*Math.cos(radlat2);var d=Math.sqrt((x1-x2)*(x1-x2)+(y1-y2)*(y1-y2)+(z1-z2)*(z1-z2));var theta=Math.acos((er*er+er*er-d*d)/(2*er*er));return theta*er}catch(e){return(0)}}function posicaomouse(){this.x=0;this.y=0}function posicaocursor(){this.ddx=0;this.ddy=0;this.dmsx='';this.dmsy='';this.telax=0;this.telay=0;this.imgx=0;this.imgy=0;this.refx=0;this.refy=0}function pontosdist(){this.xpt=new Array();this.ypt=new Array();this.dist=new Array();this.xtela=new Array();this.ytela=new Array();this.ximg=new Array();this.yimg=new Array();this.linhas=new Array()}function desenhoRichdraw(tipo,objeto,n){if(richdraw&&$i("img")){var pos=i3GEO.util.pegaPosicaoObjeto($i("img"));if((tipo=="resizeLinha")||(tipo=="resizePoligono")&&navn){try{richdraw.renderer.resize(objeto,0,0,objposicaocursor.imgx,objposicaocursor.imgy)}catch(e){window.status=n+" erro ao movimentar a linha "}}if((tipo=="resizeLinha")&&navm){try{var r=$i(richdraw.container.id);r.removeChild(r.lastChild);var dy=objposicaocursor.imgy;var dx=objposicaocursor.imgx-(objmapa.w/2);richdraw.renderer.create(richdraw.mode,richdraw.fillColor,richdraw.lineColor,richdraw.lineWidth,(pontosdistobj.ximg[n-1])-(objmapa.w/2)-1,pontosdistobj.yimg[n-1]-3,dx,dy-3)}catch(e){window.status=n+" erro ao movimentar a linha "}}if((tipo=="resizePoligono")&&navm){try{var r=$i(richdraw.container.id);r.removeChild(r.lastChild);r.removeChild(r.lastChild);var dy=objposicaocursor.imgy;var dx=objposicaocursor.imgx-(objmapa.w/2);richdraw.renderer.create(richdraw.mode,richdraw.fillColor,richdraw.lineColor,richdraw.lineWidth,(pontosdistobj.ximg[n-1])-(objmapa.w/2)-1,pontosdistobj.yimg[n-1]-3,dx,dy-3);richdraw.renderer.create(richdraw.mode,richdraw.fillColor,richdraw.lineColor,richdraw.lineWidth,(pontosdistobj.ximg[0])-(objmapa.w/2)-1,pontosdistobj.yimg[0]-3,dx,dy-3)}catch(e){window.status=n+" erro ao movimentar a linha "}}if(tipo=="insereCirculo"){if(navn){var dx=Math.pow(((pontosdistobj.xtela[n])*1)-((pontosdistobj.xtela[n-1])*1),2);var dy=Math.pow(((pontosdistobj.ytela[n])*1)-((pontosdistobj.ytela[n-1])*1),2);var w=Math.sqrt(dx+dy);try{richdraw.renderer.create('circ','','rgb(250,250,250)',richdraw.lineWidth,pontosdistobj.ximg[n-1],pontosdistobj.yimg[n-1],w,w)}catch(e){window.status=n+" erro ao desenhar o raio"}}else{var dx=Math.pow(((pontosdistobj.xtela[n])*1)-((pontosdistobj.xtela[n-1])*1),2);var dy=Math.pow(((pontosdistobj.ytela[n])*1)-((pontosdistobj.ytela[n-1])*1),2);var w=Math.sqrt(dx+dy);try{richdraw.renderer.create('circ','','rgb(250,250,250)',richdraw.lineWidth,pontosdistobj.ximg[n-1]-w,pontosdistobj.yimg[n-1]-w,w*2,w*2)}catch(e){window.status=n+" erro ao desenhar o raio"}}}}}function incluir(path){i3GEO.janela.abreAguarde("ajaxredesenha",$trad("o1"));var temp=path.split(".");if((temp[1]=="SHP")||(temp[1]=="shp")){var f="adicionaTemaSHP"}else{var f="adicionaTemaIMG"}var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?g_sid="+i3GEO.configura.sid+"&funcao="+f+"&arq="+path;var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,f,ajaxredesenha)}function inseremarcaf(xi,yi,funcaoOnclick){try{if(!$i("pontosins")){var novoel=document.createElement("div");novoel.id="pontosins";var i=novoel.style;i.position="absolute";i.top=parseInt($i("img").style.top);i.left=parseInt($i("img").style.left);document.body.appendChild(novoel)}var container=$i("pontosins");var novoel=document.createElement("div");var i=novoel.style;i.position="absolute";i.zIndex=2000;i.top=(yi-4)+"px";i.left=(xi-4)+"px";i.width="4px";i.height="4px";var novoimg=document.createElement("img");if(arguments.length==2){funcaoOnclick=""}if(funcaoOnclick!=""){novoimg.onclick=funcaoOnclick}novoimg.src=i3GEO.configura.locaplic+"/imagens/dot1.gif";with(novoimg.style){width="6px";height="6px";zIndex=2000}novoel.appendChild(novoimg);container.appendChild(novoel)}catch(e){alert("Ocorreu um erro. inseremarcaf"+e)}}function limpacontainerf(){if($i("pontosins")){$i("pontosins").innerHTML=""}if($i("mostradistancia")){$i("mostradistancia").style.display="none"}}function recuperamapa(){g_recupera=1;var p=i3GEO.configura.locaplic+"/classesphp/mapa_controle.php?funcao=recuperamapa&g_sid="+i3GEO.configura.sid;var cp=new cpaint();cp.set_response_type("JSON");cp.call(p,"recuperamapa",remapaf)}function testafuncoes(){}